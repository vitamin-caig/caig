                        GfxView v0.4

Vitamin/CAIG/2001

  Плагин для просмотра графических файлов от Спектрума для  фай-
лового менеджера Total Commander. Для подключения плагина  нужно
скопировать файл gfxview.wlx в папку  с коммандером и  зарегист-
рировать его:
Конфигурация->Настройка->Ред./Просмотр-> Внутренний  просмотров-
щик->LS-plugins->Add.
Тут надо добавить новый плагин и закрепить свое решение нажатием
на клавишу ОК. Теперь нужные файлы можно будет смотреть по нажа-
тию F3. Плагин желательно ставить последним в очереди, так  как
он сам определяет нужные типы файлов и игнорирует  неподходящие,
а коммандер может это неадекватно понять...

Поддерживаемые форматы файлов:
файлы 1536/3072 байта- упакованные/неупакованные чанки.  Режимы-
порядок полубайт в байтах
файлы 2048/768 байт- шрифты.
файлы 6144/6912 байт- обычные экраны. Режимы- экран/спрайт.
файлы 12288 байт (.mc)- мультиколорные экраны.
файлы 13824 байта- двойные экраны. По  непонятным  причинам,  не
срабатывает, если эти файлы имеют расширение img (или это только
у меня такое?)
файлы 18432 байт- триколорные экраны.
файлы 24576 байт- мультиколорные двойные экраны.
файлы *.888- триколорные экраны от редактора 8col (Alco, с  тебя
магарыч, потому как я чуть мозги себе не свернул,  разбираясь  в
депакере :) )
файлы *.plc- упакованные LaserCompact экраны, как  с  депакером,
так и без. Также поддерживается определение по внутренней сигна-
туре (а за этот депакер я себе завтра медаль куплю :) ).
файлы *.bit- упакованные спрайты для QHTS. Определение по  внут-
ренней сигнатуре также присутствует. Переключение режимов-  лис-
тание спрайтов.
файлы *.s- спрайт-архивы программы  Sprites  Generator  v5.0  by
Real Software'1998 (также определение по сигнатуре).  Переключе-
ние режимов- листание спрайтов. Фон имеет серый цвет для  спрай-
тов с маской.
Все вышеперечисленные форматы также видятся в режиме хобеты.

По нажатию на клавишу F можно включить/отключить вписывание изо-
бражения в окно. Нажатиями PgUp+PgDwn можно менять  режимы  про-
смотра. Нажатием на Enter можно  включить/отключить  сглаживание
при масштабировании. Клавиша I инвертирует _область_данных_ изо-
бражения. По клавише S  можно  сохранить  файл  _в_оригинальном_
размере и виде в формате bmp. Нажатием клавиш +/- меняется масш-
таб  просмотра  в  диапазоне 100-1000% с шагом в 100%. Клавиша В
включает/отключает повышенную яркость для триколоров.

Плагин сохраняет свои настройки в секции gfxview файла inX.cfg в
каталоге TotalCommander. Секции и их описание:

[gfxview]
scale=0         ;масштаб по умолчанию в процентах (0- вписывать)
filter=1        ;билинейная фильтрация
border=0        ;цвет бордюра в формате 65536*R+256*G+B
bright=1        ;повышенная яркость для триколоров
palette=z80stealth     ;используемая палитра (аналогично inScr)


В  комплекте  с  плагином  идет  утилита  zxgfx2bmp для пакетной
конверсии  картинок.  Берет  все  те  же  форматы, что и плагин,
кроме спрайтов от Sprites Generator. При запуске без параметров,
программа  выдает  помощь  по  ключам. Получить текстовый файл с
ключами для вдумчивого прочтения можно, набрав
zxgfx2bmp.exe > help.txt


Что нового:

v0.4 from 8.02.2006
[*]- исправлена фильтрация- увеличивался размер картинок
[+]- поддержка спрайт-архивов от Sprites Generator v5.0 by Real
     Software'1998 (Знахарь)
[+]- бордюр в окне (Знахарь)
[+]- хранение настроек в inX.cfg (Знахарь)
[+]- там же хранится загружаемая палитра (Знахарь)
[*]- триколорные картинки тоже используют внешнюю палитру
[+]- масштабирование клавишами (Знахарь)
[+]- изменение яркости для триколоров

v0.35 from 13.08.2005
[*]- глюки при автоопределении файлов больше 49152к.
[*]- определение файлов по размеру, а не по расширению  где  это
     возможно.
[*]- если в картинке нет мерцания, она не перерисовывается 2 ра-
     за в секунду (положительно сказывается на загрузке  процес-
     сора при включенной фильтрации)

v0.3 from 16.07.2005
[*]- центрирование изображения как при вписывании так и при про-
     смотре реального размера (Grey).
[+]- функция инверсии (Grey).
[*]- ошибка при повторном просмотре изображения через фильтр-
     оно не отображалось (Grey).
[+]- поддержка hobeta (many people %)).
[*]- утечка памяти- объект не удалялся при закрытии окна.
[-]- убрана строка автоопределения
[*]- вместо этого плагин сам все определяет...
[+]- сохранение картинки в виде .bmp (Grey).
[*]- не было проверки сигнатуры и структур для формата .bit

v0.25 from 13.07.2005
[+]- добавлена билинейная фильтрация изображения при масштабиро-
     вании.
[+]- добавлена поддержка формата .mc
[+]- добавлена поддержка формата .mcx

v0.2 from 10.03.2005
[*]- некоторые товарищи (не будем показывать пальцами)  ругались
     на невысокую скорость преобразования картинок.  Теперь  все
     рисуется максимально быстрым способом.
[*]- под давлением того же  товарища  сделана  поддержка  flash.
     Частота мигания- 2 герца.
[+]- можно смотреть экраны в формате спрайтов.
[*]- шрифты отображаются сразу в двух форматах
[*]- при распаковке LC контролируется выход  за  пределы  экрана
     (нужно на битых файлах).
[+]- поддержка просмотра чанков.
[+]- при вписывании в окно сохраняются пропорции.

v0.1 from 19.01.2005

 First version

Все свои вопросы и багрепорты просьба слать на мыло
vitamin_caig@mail.ru или оставлять их в эхе zx.spectrum.

Огромное  спасибо  Знахарю  за  помощь  в  отладке  и  улучшении
программ.

                                            8.02.2005
